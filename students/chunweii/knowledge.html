<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 4.1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="/2023/markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="/2023/markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/2023/markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="/2023/markbind/css/octicons.css">
    <link rel="stylesheet" href="/2023/markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="/2023/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/2023/markbind/css/markbind.min.css"><script src="/2023/markbind/js/polyfill.min.js"></script>
    <script src="/2023/markbind/js/vue.min.js"></script>
    <script src="/2023/markbind/js/markbind.min.js"></script>
    <script src="knowledge.page-vue-render.js"></script>
    <script src="/2023/markbind/js/jquery.min.js"></script><link rel="stylesheet" href="/2023/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/2023/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/2023/stylesheets/main.css">
<link rel="icon" href="/2023/favicon.ico"></head>
<script>
  const baseUrl = '/2023'
</script>
<body >
<div id="app" data-server-rendered="true"><header fixed=""><div placement="top" data-v-15113a2f><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-primary" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="/2023/index.html" title="Home" class="navbar-brand" data-v-15113a2f>CS3281&amp;2-2023/Students</a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-15113a2f> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3281</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/knowledge.html" class="dropdown-item" data-v-2e98b3f0>Knowledge</a></li> <li data-v-2e98b3f0><a href="https://nus-cs3281.github.io/2023-dashboard/?search=&amp;sort=groupTitle&amp;sortWithin=title&amp;timeframe=commit&amp;mergegroup=&amp;groupSelect=groupByAuthors&amp;breakdown=false" class="dropdown-item" data-v-2e98b3f0>Code Dashboard</a></li></ul></li> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3282</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/cs3282-index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/talksSchedule.html" class="dropdown-item" data-v-2e98b3f0>Lightning Talks</a></li></ul></li> <li data-v-15113a2f><a href="/2023/instructions.html" class="nav-link" data-v-15113a2f>Instructions</a></li> <li data-v-15113a2f><a href="https://nus-cs3281.github.io/website/" class="nav-link" data-v-15113a2f>CS3281&amp;2 Website <span data-v-15113a2f><span aria-hidden="true" class="glyphicon glyphicon-share-alt" data-v-15113a2f></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><a href="https://github.com/nus-cs3281/2023" class="nav-link" data-v-15113a2f><span data-v-15113a2f><span aria-hidden="true" class="fab fa-github" data-v-15113a2f></span></span></a></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><div id="content-wrapper" class="fixed-header-padding"><h3 id="observer-design-pattern-in-rxjs"><span id="observer-design-pattern-in-rxjs" class="anchor"></span>Observer design pattern (in rxjs)<a href="#observer-design-pattern-in-rxjs" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>In CS2103/T, I learnt about the Observer design pattern but I did not really see it being used often until I had to work with rxjs in Angular.</p> <p>Observables are used in Angular to provide a form of lazy transfer of data to the observer in both a synchronous and asynchronous manner, in a beautiful functional programming style. For example, if we want to get API data of the authenticated user from github, we can call</p> <pre><code class="hljs typescript"><span><span class="hljs-keyword">const</span> observable = <span class="hljs-keyword">from</span>(octokit.users.getAuthenticated()).pipe(
</span><span>    map(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response[<span class="hljs-string">'data'</span>]),
</span><span>    catchError(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> throwError(<span class="hljs-string">'Failed to fetch authenticated user.'</span>))
</span><span>);
</span></code></pre><p><code class="hljs inline no-lang">from(...)</code> will convert the <code class="hljs inline no-lang">Promise</code> object <code class="hljs inline no-lang">octokit.users.getAuthenticated()</code> into an observable. We can then change the values returned by this promise by using <code class="hljs inline no-lang">pipe(...)</code>. In the example, the <code class="hljs inline no-lang">map(...)</code> function in the pipe will only retrieve the <code class="hljs inline no-lang">'data'</code> values of the response from the API call. Afterwards, we can subscribe to the observable somewhere else by calling <code class="hljs inline no-lang">subscribe(...)</code>. In the example below, we will subscribe to the observable and print the data to the console.</p> <pre><code class="hljs typescript"><span>observable.subscribe(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(data));
</span></code></pre><p>rxjs provides a wide range of transformation operators (such as map) that will make programming with lazy data (like asynchronous API calls) easier. For more information, visit <a href="https://rxjs.dev/guide/overview">https://rxjs.dev/guide/overview</a>.</p> <h3 id="logging"><span id="logging" class="anchor"></span>Logging<a href="#logging" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Though it might seem to be redundant at first, log messages are helpful to developers when users report a bug that cannot be resolved easily. In CATcher, logging is used at various levels, from logging error messages to logging network HTTP requests to the github server. The octokit API library that is used to perform API requests to the Github server allows developers to customize the various logging levels, so that there is no need to manually hard-code the logging messages for every method that has a Github API call. By separating the various logging levels, developers can easily filter through the less important messages if there is a critical error. There are usually 4 levels of logging for the console (other than the general <code class="hljs inline no-lang">console.log</code>), shown below in increasing severity:</p> <ol><li><strong>debug</strong>: Provides useful information to the developer in development mode. Usually debug messages are not very useful in production, especially for CATcher, since they take up a lot of space in the log. An example of a debug message can be the HTTP request details of an API call to Github.</li> <li><strong>info</strong>: Provides information about a less important event occuring or a state change. Such information is not very important to the developers, but in certain situations, the developer may find such messages helpful.</li> <li><strong>warn</strong>: Provides an important warning to the developer if there is an unexpected situation or bad code, but the application can continue to work. Developers should take note of such warnings and address these warnings if possible.</li> <li><strong>error</strong>: Provides an important error message to the developer if one or more components of the application fails and stop functioning properly. This usually constitutes as a bug that developers should work on promptly.</li></ol> <h3 id="view-encapsulation"><span id="view-encapsulation" class="anchor"></span>View Encapsulation<a href="#view-encapsulation" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Suppose you want to create an Angular component which contains a child component that needs to be styled. The best way is to apply the CSS styles to the child itself. But sometimes, it is not possible or just too tedious. For example, in this CATcher PR, I want to apply markdown-like CSS styles to a custom generated HTML code. To do this, I have to put the HTML inside an article tag, set the class of the article to &quot;markdown-body&quot;, and let the css file handle the styling. However, the CSS styles did not get applied to the generated HTML. Why?</p> <p>To solve this issue, we will have to learn about view encapsulation in Angular. There are currently 3 types of view encapsulation in Angular: ShadowDom, Emulated (default) and None. The table below summarizes the different view encapsulation modes.</p> <div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead><tr><th>View Encapsulation</th> <th>Description</th></tr></thead> <tbody><tr><td>ShadowDOM</td> <td>In Angular, ShadowDOM uses the browsers's internal Shadow DOM API to encapsulate/hide the Angular component's view inside a ShadowRoot and applies the styles specified only to the component itself. See <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM">mdn docs</a> for more details on what is ShadowDOM. The drawback of this is that some browsers may not support ShadowDOM (but major browsers like Chrome and Firefox support ShadowDOM).</td></tr> <tr><td>Emulated</td> <td>This is the default view encapsulation in Angular. It emulated the behaviour of ShadowDOM, without using ShadowDOM. Angular does this by adding unique attributes to the component templates and edits the css by applying the attributes too. See the picture below for an example.</td></tr> <tr><td>None</td> <td>Perhaps the easiest to understand. Unlike ShadowDOM and Emulated, the HTML and CSS is untouched. However, this can cause the CSS to be applied to the entire webpage. We try to avoid using this if possible, in case of styling conflicts.</td></tr></tbody></table></div><p>Example of emulated view encapsulation:
<a href="/2023/students/chunweii/Emulated_encapsulation_component.png" target="_self"><img src="/2023/students/chunweii/Emulated_encapsulation_component.png" alt="Component" class="img-fluid"></a> <a href="/2023/students/chunweii/Emulated_encapsulation_style.png" target="_self"><img src="/2023/students/chunweii/Emulated_encapsulation_style.png" alt="Style" class="img-fluid"></a></p> <p>Notice that there is a special <code class="hljs inline no-lang">_ngcontent-ctx-c23</code> attribute applied to the elements within <code class="hljs inline no-lang">app-issue</code> component, while the <code class="hljs inline no-lang">app-issue</code> element itself acts as a &quot;shadow host&quot;, hence the attribute <code class="hljs inline no-lang">_nghost-ctx-c23</code>. However, the content of the child component <code class="hljs inline no-lang">app-issue-title</code> will not have this attribute. In the bottom picture, we see that Angular has changed our CSS styles such that it will only be applied to elements with attributes such as <code class="hljs inline no-lang">_ngcontent-ctx-c23</code>. This prevents the style from being applied throughout the web page, hence emulating the behaviour of ShadowDOM.</p> <p>Going back to the initial question, why were the styles not applied to the generated HTML? This is because we were using the default emulated view encapsulation, so the imported CSS file will be edited to include the unique attribute <code class="hljs inline no-lang">_ngcontent-ctx-cXX</code>. The generated HTML however, does not have this attribute. Therefore, we will need to set the view encapsulation to None, so that we can apply the markdown-like CSS styles to the generated HTML.</p> <h3 id="authentication-and-authorization"><span id="authentication-and-authorization" class="anchor"></span>Authentication and authorization<a href="#authentication-and-authorization" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>In CATcher, we need to perform authentication to ensure that users who log in are <span data-mb-component-type="tooltip" tabindex="0" class="trigger"><!----> <!----></span>. Authorization is also needed to ensure that only the relevant students, tutors and admins can log in to CATcher. To achieve this, CATcher uses Github OAuth to authenticate and authorize users.</p> <p>OAuth is an open-standard protocol for authorization. By using Github OAuth, the user first authenticates himself by logging into his own Github account. Then, Github will ask the user for permission to allow CATcher to access certain content and perform certain actions. By accepting the permission request, Github will authorize CATcher to act on the user's behalf, for example, to create a new issue during PE. Here are the details behind the OAuth process when a user tries to log into CATcher:</p> <ol><li>User selects a session and logs in.</li> <li>CATcher will redirect the user to Github to log in, and specify the scope of permissions needed for CATcher.</li> <li>The user is redirected back to CATcher. Github will send an authorization code to CATcher.</li> <li>CATcher will request for an access token from Github. However, it has to do so through a backend server (gatekeeper).</li> <li>The browser receives the access token from Github via gatekeeper. This access token will be used to authenticate future Github API requests made by the user.</li></ol> <p>Thanks to OAuth, users can grant third-party applications permissions to access, modify or delete content on another account. CATcher benefits from this because users do not need to use the Github interface directly to do their PE.</p> <p>However, the access token must be securely kept, since anyone who has the access token can perform actions on behalf of CATcher.</p> <p>More resources here: <a href="https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#web-application-flow">Github OAuth guide</a>, <a href="https://datatracker.ietf.org/doc/html/rfc6749">IETF RFC6749 document</a></p> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88></div> <!----></nav></div> <footer><div class="text-center"><p>[<strong>This site was generated using <img src="https://markbind.org/favicon.ico" width="25"> <a href="https://markbind.org/">MarkBind 4.1.0</a></strong> on Tue, May 2, 2023, 2:23:27 PM UTC]<br> <span class="dimmed"><small><small>favicon.ico of this site was made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></small></small></span></p></div></footer></div>
</body><script src="/2023/markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
