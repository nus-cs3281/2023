<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 4.1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="/2023/markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="/2023/markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/2023/markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="/2023/markbind/css/octicons.css">
    <link rel="stylesheet" href="/2023/markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="/2023/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/2023/markbind/css/markbind.min.css"><script src="/2023/markbind/js/polyfill.min.js"></script>
    <script src="/2023/markbind/js/vue.min.js"></script>
    <script src="/2023/markbind/js/markbind.min.js"></script>
    <script src="knowledge.page-vue-render.js"></script>
    <script src="/2023/markbind/js/jquery.min.js"></script><link rel="stylesheet" href="/2023/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/2023/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/2023/stylesheets/main.css">
<link rel="icon" href="/2023/favicon.ico"></head>
<script>
  const baseUrl = '/2023'
</script>
<body >
<div id="app" data-server-rendered="true"><header fixed=""><div placement="top" data-v-15113a2f><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-primary" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="/2023/index.html" title="Home" class="navbar-brand" data-v-15113a2f>CS3281&amp;2-2023/Students</a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-15113a2f> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3281</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/knowledge.html" class="dropdown-item" data-v-2e98b3f0>Knowledge</a></li> <li data-v-2e98b3f0><a href="https://nus-cs3281.github.io/2023-dashboard/?search=&amp;sort=groupTitle&amp;sortWithin=title&amp;timeframe=commit&amp;mergegroup=&amp;groupSelect=groupByAuthors&amp;breakdown=false" class="dropdown-item" data-v-2e98b3f0>Code Dashboard</a></li></ul></li> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3282</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/cs3282-index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/talksSchedule.html" class="dropdown-item" data-v-2e98b3f0>Lightning Talks</a></li></ul></li> <li data-v-15113a2f><a href="/2023/instructions.html" class="nav-link" data-v-15113a2f>Instructions</a></li> <li data-v-15113a2f><a href="https://nus-cs3281.github.io/website/" class="nav-link" data-v-15113a2f>CS3281&amp;2 Website <span data-v-15113a2f><span aria-hidden="true" class="glyphicon glyphicon-share-alt" data-v-15113a2f></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><a href="https://github.com/nus-cs3281/2023" class="nav-link" data-v-15113a2f><span data-v-15113a2f><span aria-hidden="true" class="fab fa-github" data-v-15113a2f></span></span></a></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><div id="content-wrapper" class="fixed-header-padding"><h3 id="ay22-23-sem-2-knowledge"><span id="ay22-23-sem-2-knowledge" class="anchor"></span>AY22/23 Sem 2 Knowledge<a href="#ay22-23-sem-2-knowledge" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <h4 id="tool-1-dependabot"><span id="tool-1-dependabot" class="anchor"></span>Tool 1: Dependabot<a href="#tool-1-dependabot" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p>Dependabot is a Github Bot that automates the process of keeping a project's dependencies up-to-date. This is a great tool to improve the maintainability of a project as well as ensuring that the project is safe from the latest vulnerabilities.</p> <p>There are 3 main features of Dependabot:</p> <ol><li>Dependabot alerts - sends an alert to the project maintainer whenever a new version of a dependency is available</li> <li>Dependabot version updates - sends an automated PR to update the version of a dependency whenever a new version is available</li> <li>Dependabot security updates - sends an automated PR to update the version of a dependency when the current version is vulnerable to known attacks</li></ol> <p>Depending on the needs of the project, maintainers can choose the most suitable features to use.</p> <p>In addition, there is another github action <a href="https://github.com/marketplace/actions/dependabot-auto-merge">Dependabot Auto Merge</a> that automatically merges Dependabot's PR.</p> <p>Resources:</p> <ul><li><a href="https://github.com/MarkBind/markbind/issues/2043">Explore and document steps to handle dependabot security alerts #2043</a></li> <li><a href="https://docs.github.com/en/code-security/dependabot/dependabot-alerts/about-dependabot-alerts">Dependabot Docs</a></li></ul> <h4 id="tool-2-npm-workspaces"><span id="tool-2-npm-workspaces" class="anchor"></span>Tool 2: NPM Workspaces<a href="#tool-2-npm-workspaces" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p>NPM Workspaces refers to the set of features in the <code class="hljs inline no-lang">npm</code> cli that supports the management of mono-repos. This was researched as an alternative to the current mono-repo tool used for Markbind - Lerna.</p> <p>NPM workspaces allows users to create, manage, and publish multiple packages as separate entities, but with shared dependencies and development workflows. Hence, this set of features results in a much more streamlined deployment workflow. Also, it automates the linking process as part of <code class="hljs inline no-lang">npm install</code> and thus removes the need to manually use <code class="hljs inline no-lang">npm link</code> to symlink modules.</p> <p>Due to its seamless usage with the <code class="hljs inline no-lang">npm</code> cli, NPM Workspaces is now the de-facto tool for users who want to manage their mono-repo projects.</p> <p>Resources:</p> <ul><li><a href="https://github.com/MarkBind/markbind/issues/1984">Explore using Turborepo to improve build system #1984</a></li> <li><a href="https://www.youtube.com/watch?v=4DOBsEGyKF0">Building a MonoRepo with NPM Workspaces</a></li> <li><a href="https://docs.npmjs.com/cli/v7/using-npm/workspaces">NPM Workspaces docs</a></li></ul> <h4 id="tool-3-codespaces"><span id="tool-3-codespaces" class="anchor"></span>Tool 3: Codespaces<a href="#tool-3-codespaces" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <p>Github Codespaces is a cloud-based development environment that is accessbile to all Github users. It helps to greatly simplify the setting-up process of a development environment, thus greatly improving the onboarding experience of a new contributor.</p> <p>It also improves developer productivity due to its deep integration with Github project management tools as well as its liveshare feature which allows for real-time collaboration.</p> <p>Cost-wise, Github Codespaces is basically free-to-use for students, and additional computing hours can be purchased at a low-cost of $0.18 / hr.</p> <p>Resources:</p> <ul><li><a href="https://github.com/nus-cs3281/2023/issues/33">Lightning Talk: Onboard and start coding instantly with Codespaces #33</a></li> <li><a href="https://github.com/features/codespaces">Codespaces docs</a></li></ul> <h3 id="ay20-21-sem-2-knowledge"><span id="ay20-21-sem-2-knowledge" class="anchor"></span>AY20/21 Sem 2 Knowledge<a href="#ay20-21-sem-2-knowledge" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <h4 id="tool-1-github-actions"><span id="tool-1-github-actions" class="anchor"></span>Tool 1: Github Actions<a href="#tool-1-github-actions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <h5 id="aspect-1-exposing-secrets-to-workflows-triggered-from-a-forked-repo"><span id="aspect-1-exposing-secrets-to-workflows-triggered-from-a-forked-repo" class="anchor"></span>Aspect 1: Exposing secrets to workflows triggered from a forked repo<a href="#aspect-1-exposing-secrets-to-workflows-triggered-from-a-forked-repo" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>Due to security concerns, Github Actions does not expose repo secrets to workflows which are triggered from a forked repo. However, there may be actual use-cases where certain automated workflows, which require certain repo secrets, may be useful such as PR previews, automated labelling of PRs, generate code coverage report, etc.</p> <p>Github Actions provide the <code class="hljs inline no-lang">pull_request_target</code> and <code class="hljs inline no-lang">workflow_run</code> to cater for such use-cases. To summarize,  <code class="hljs inline no-lang">pull_request_target</code> runs the trusted workflow code in <strong>your</strong> actual repo (not the forked repo), and as such, it is able to expose the repo secrets during the workflow run. On the other hand, <code class="hljs inline no-lang">workflow_run</code> can be triggered after a prior workflow run has completed and it has access to the repo secrets. The ideal use-case that Github recommends for <code class="hljs inline no-lang">workflow_run</code> is for the prior workflow to generate some <span data-mb-component-type="tooltip" tabindex="0" class="trigger"><!----> <!----></span>, and for the privileged workflow to take the generated artifacts, do some analysis and post some comments on the pull request.</p> <p>Some useful resources:</p> <ul><li><a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#pull-request-events-for-forked-repositories-1">Github Actions Docs - secrets not passed to workflows triggered from forked repo </a></li> <li><a href="https://docs.github.com/en/actions/guides/storing-workflow-data-as-artifacts#about-workflow-artifacts">Github Actions Docs - about storing workflow data as Artifacts</a></li> <li><a href="https://securitylab.github.com/research/github-actions-preventing-pwn-requests">Github's research and recommendations on securing workflows from forked repo</a></li> <li><a href="https://github.blog/2020-08-03-github-actions-improvements-for-fork-and-pull-request-workflows/">Github blog introducing <code class="hljs inline no-lang">pull_request_target</code> and <code class="hljs inline no-lang">workflow_run</code></a></li></ul> <h5 id="aspect-2-sharing-data-across-different-steps"><span id="aspect-2-sharing-data-across-different-steps" class="anchor"></span>Aspect 2: Sharing data across different steps<a href="#aspect-2-sharing-data-across-different-steps" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>Github actions provide the abilitiy for a task to communicate with the runner machine to set environmental variables and output values that other tasks can reference, via <code class="hljs inline no-lang">workflow commands</code>. This might be useful for segmenting the workflow up into multiple steps, to improve code readability and maintainability.</p> <p>Some useful resources:</p> <ul><li><a href="https://docs.github.com/en/actions/reference/workflow-commands-for-github-actions">Github Actions Docs - workflow commands</a></li> <li><a href="https://trstringer.com/github-actions-multiline-strings/">Blog Post - Output Multiline Strings in GitHub Actions</a></li></ul> <h5 id="aspect-3-github-tokens"><span id="aspect-3-github-tokens" class="anchor"></span>Aspect 3: Github Tokens<a href="#aspect-3-github-tokens" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>For Github Actions, there is a default <code class="hljs inline no-lang">GITHUB_TOKEN</code> secret that the user can use to authenticate in a workflow run. The token expires after the job is finished. With this, one doesn't need to explicitly generate Personal Access Token for workflows which require <strong>write</strong> repo permissions.</p> <p>Some useful resources:</p> <ul><li><a href="https://docs.github.com/en/actions/reference/authentication-in-a-workflow#about-the-github_token-secret">Github Actions Docs - About <code class="hljs inline no-lang">GITHUB_TOKEN</code> secret</a></li> <li><a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">Github Docs - Personal Access Token</a></li></ul> <h4 id="tool-2-jest"><span id="tool-2-jest" class="anchor"></span>Tool 2: Jest<a href="#tool-2-jest" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <h5 id="aspect-1-testing-using-data-that-are-structurally-similar"><span id="aspect-1-testing-using-data-that-are-structurally-similar" class="anchor"></span>Aspect 1: Testing using data that are structurally similar<a href="#aspect-1-testing-using-data-that-are-structurally-similar" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>It may be quite repetitive to write tests for data which have a similar structure. One example is unit testing an <code class="hljs inline no-lang">add(x, y)</code> function. You may wish to use the following testcases: <code class="hljs inline no-lang">{0,0}, {-1,-3}, {1000000000,1000000000}</code>. Jest offers a feature to simplify testing for such cases where the data share a similar structure using the <code class="hljs inline no-lang">.each</code> operator. In the same example, the tests can be simplified to as follows:</p> <pre><code class="no-line-numbers hljs javascript"><span>test.each([
</span><span>  [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
</span><span>  [-<span class="hljs-number">1</span>, -<span class="hljs-number">3</span>, -<span class="hljs-number">4</span>],
</span><span>  [<span class="hljs-number">1000000000</span>, <span class="hljs-number">1000000000</span>, <span class="hljs-number">2000000000</span>],
</span><span>])(<span class="hljs-string">'.add(%i, %i)'</span>, <span class="hljs-function">(<span class="hljs-params">a, b, expected</span>) =&gt;</span> {
</span><span>  expect(a + b).toBe(expected);
</span><span>});
</span></code></pre><p>Some useful resources:</p> <ul><li><a href="https://elfi-y.medium.com/reduce-boilerplate-test-code-with-jest-it-each-30a0eec9776d">Blog Post - Reduce boilerplate test code with Jest it.each</a></li> <li><a href="https://jestjs.io/docs/api#testeachtablename-fn-timeout">Jest Docs - <code class="hljs inline no-lang">test.each</code></a></li></ul> <h5 id="aspect-2-testing-specific-files-or-functions"><span id="aspect-2-testing-specific-files-or-functions" class="anchor"></span>Aspect 2: Testing specific files or functions<a href="#aspect-2-testing-specific-files-or-functions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>For testing purposes, sometimes it might be more efficient to drill down to a single test-file, rather than running the whole test-suite. Jest offers this feature where you can simply type <code class="hljs inline no-lang">npm test -- &lt;PATH_TO_FILE&gt;</code> and it will run the test only on that specific file.</p> <p>To test a specific method in the test file, you have to set a flag so that Jest knows to skip all other unrelated functions. This can be done using the <code class="hljs inline no-lang">.only</code> operator.</p> <p>Some useful resources:</p> <ul><li><a href="https://stackoverflow.com/questions/28725955/how-do-i-test-a-single-file-using-jest">Stackoverflow - How to test a single file using jest</a></li> <li><a href="https://jestjs.io/docs/api#testonlyname-fn-timeout">Jest Docs - <code class="hljs inline no-lang">test.only</code></a></li></ul> <h4 id="tool-3-markbind"><span id="tool-3-markbind" class="anchor"></span>Tool 3: Markbind<a href="#tool-3-markbind" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h4> <h5 id="aspect-1-testing-ci-scripts-during-development"><span id="aspect-1-testing-ci-scripts-during-development" class="anchor"></span>Aspect 1: Testing CI scripts during development<a href="#aspect-1-testing-ci-scripts-during-development" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>There are not a lot of resources online regarding the testing CI scripts from a forked repo during development, especially for a mono-repo such as Markbind. The following is a general guideline for a CI build script that allows you to test your code changes:</p> <ol><li>Navigate out of the current directory and <a href="https://stackoverflow.com/questions/1911109/how-do-i-clone-a-specific-git-branch">git clone your forked repo</a></li> <li>Navigate into the your cloned repo and run the setup instructions in your repo</li> <li>Navigate into the original directory - most CI platforms provide an environment variable for this (eg. Travis-CI provides <code class="hljs inline no-lang">TRAVIS_BUILD_DIR</code>)</li> <li>Run the deploy steps</li></ol> <p>Some useful resources:</p> <ul><li><a href="https://www.atlassian.com/git/tutorials/monorepos">Atlassian Tutorial - What is a monorepo?</a></li> <li><a href="https://stackoverflow.com/questions/17509669/how-to-install-an-npm-package-from-github-directly">Stackoverflow - How to install NPM package from Github directly</a> - A far simpler method that works for npm package repos which are not a monorepo</li></ul> <h5 id="aspect-2-useful-ci-environmental-variables"><span id="aspect-2-useful-ci-environmental-variables" class="anchor"></span>Aspect 2: Useful CI environmental variables<a href="#aspect-2-useful-ci-environmental-variables" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>Implementation of <code class="hljs inline no-lang">markbind deploy --ci</code> uses some useful CI environmental envariables to extract information such as:</p> <ol><li>Which CI platform is the code being run on</li> <li>Getting the repo slug in the form <code class="hljs inline no-lang">owner_name/repo_name</code></li></ol> <p>Some useful resources:</p> <ul><li><a href="https://github.com/codecov/codecov-bash/blob/master/codecov#L499-L951">Snippet of Codecov's bash script which leverages heavily on CI environmental variables</a> - Credit to HSU ZHONG JUN for suggesting the resource in <a href="https://github.com/MarkBind/markbind/issues/1432">Support more CI platforms for markbind deploy #1432</a>.</li></ul> <h5 id="aspect-3-regex"><span id="aspect-3-regex" class="anchor"></span>Aspect 3: Regex<a href="#aspect-3-regex" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h5> <p>Markbind relies on some regex expressions for parsing. It would be good to have a basic understanding of regex to understand some of the parsing-related functions.</p> <p>Some useful resources:</p> <ul><li><a href="https://regex101.com/">Regex101 (useful and convenient for testing regex expressions)</a></li> <li><a href="https://www.youtube.com/watch?v=909NfO1St0A">Youtube - Regular Expressions (Regex) in JavaScript - tutorial</a></li> <li><a href="https://www.youtube.com/watch?v=sa-TUpSx1JA">Youtube - Regular Expressions (Regex) Tutorial: How to Match Any Pattern of Text</a></li></ul> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88></div> <!----></nav></div> <footer><div class="text-center"><p>[<strong>This site was generated using <img src="https://markbind.org/favicon.ico" width="25"> <a href="https://markbind.org/">MarkBind 4.1.0</a></strong> on Tue, May 2, 2023, 2:23:27 PM UTC]<br> <span class="dimmed"><small><small>favicon.ico of this site was made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></small></small></span></p></div></footer></div>
</body><script src="/2023/markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
