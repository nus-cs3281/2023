<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 4.1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="/2023/markbind/css/bootstrap.min.css">
    <link rel="stylesheet" href="/2023/markbind/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="/2023/markbind/glyphicons/css/bootstrap-glyphicons.min.css">
    <link rel="stylesheet" href="/2023/markbind/css/octicons.css">
    <link rel="stylesheet" href="/2023/markbind/material-icons/material-icons.css">
    <link rel="stylesheet" href="/2023/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/2023/markbind/css/markbind.min.css"><script src="/2023/markbind/js/polyfill.min.js"></script>
    <script src="/2023/markbind/js/vue.min.js"></script>
    <script src="/2023/markbind/js/markbind.min.js"></script>
    <script src="knowledge.page-vue-render.js"></script>
    <script src="/2023/markbind/js/jquery.min.js"></script><link rel="stylesheet" href="/2023/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/2023/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/2023/stylesheets/main.css">
<link rel="icon" href="/2023/favicon.ico"></head>
<script>
  const baseUrl = '/2023'
</script>
<body >
<div id="app" data-server-rendered="true"><header fixed=""><div placement="top" data-v-15113a2f><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-primary" data-v-15113a2f><div class="container-fluid" data-v-15113a2f><div class="navbar-left" data-v-15113a2f><a href="/2023/index.html" title="Home" class="navbar-brand" data-v-15113a2f>CS3281&amp;2-2023/Students</a></div> <div class="navbar-default" data-v-15113a2f><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-15113a2f> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3281</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/knowledge.html" class="dropdown-item" data-v-2e98b3f0>Knowledge</a></li> <li data-v-2e98b3f0><a href="https://nus-cs3281.github.io/2023-dashboard/?search=&amp;sort=groupTitle&amp;sortWithin=title&amp;timeframe=commit&amp;mergegroup=&amp;groupSelect=groupByAuthors&amp;breakdown=false" class="dropdown-item" data-v-2e98b3f0>Code Dashboard</a></li></ul></li> <li class="nav-link dropdown" data-v-2e98b3f0><a role="button" data-bs-toggle="dropdown" class="dropdown-toggle" data-v-2e98b3f0>CS3282</a> <ul class="dropdown-menu" data-v-2e98b3f0> <li data-v-2e98b3f0><a href="/2023/cs3282-index.html" class="dropdown-item" data-v-2e98b3f0>Students</a></li> <li data-v-2e98b3f0><a href="/2023/students/talksSchedule.html" class="dropdown-item" data-v-2e98b3f0>Lightning Talks</a></li></ul></li> <li data-v-15113a2f><a href="/2023/instructions.html" class="nav-link" data-v-15113a2f>Instructions</a></li> <li data-v-15113a2f><a href="https://nus-cs3281.github.io/website/" class="nav-link" data-v-15113a2f>CS3281&amp;2 Website <span data-v-15113a2f><span aria-hidden="true" class="glyphicon glyphicon-share-alt" data-v-15113a2f></span></span></a></li></ul></div> <ul class="navbar-nav navbar-right" data-v-15113a2f><li data-v-15113a2f><a href="https://github.com/nus-cs3281/2023" class="nav-link" data-v-15113a2f><span data-v-15113a2f><span aria-hidden="true" class="fab fa-github" data-v-15113a2f></span></span></a></li></ul></div></nav> <div class="lower-navbar-container" style="display:none;" data-v-15113a2f><!----> <!----></div></div></header> <div id="flex-body"><div id="content-wrapper" class="fixed-header-padding"><h1 id="cs3282-semester-knowledge-gained"><span id="cs3282-semester-knowledge-gained" class="anchor"></span>CS3282 Semester Knowledge Gained<a href="#cs3282-semester-knowledge-gained" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <h2 id="kotlin"><span id="kotlin" class="anchor"></span>Kotlin<a href="#kotlin" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Kotlin is a relatively newer programming language (July 2011) that runs on the JVM. It was designed to be interoperable with Java and supports most of the same features
that Java is known for, such as OOP programming paradigms like inheritance, polymorphism, etc. Being a newer language, it also aims to address some of the issues that Java
faces. The most prominent examples that I have encountered are the following</p> <ul><li>Null safety is built into the language compared to Java which helps avoid null pointer exceptions. Declaring a type with a '?' is equivalent to declaring an object as an <code class="hljs inline no-lang">Optional</code> in Java.
For example, a Kotlin declaration <code class="hljs inline no-lang">s : String?</code> allows for the variable <code class="hljs inline no-lang">s</code> to be a <code class="hljs inline no-lang">null</code> while for <code class="hljs inline no-lang">s : String</code>, attempting to assign <code class="hljs inline no-lang">s = null</code> will automatically cause an exception.
<ul><li>This is opposed to Java where null safety requires us to use <code class="hljs inline no-lang">Optional&lt;T&gt;</code> with the desired class which can make declarations somewhat cumbersome.</li> <li>Similar to Java's <code class="hljs inline no-lang">Optional</code> methods, the <code class="hljs inline no-lang">String?</code> has equivalent methods. <a href="https://typealias.com/guides/java-optionals-and-kotlin-nulls/">Reference link</a>.</li></ul></li></ul> <pre><code class="hljs"><span>// Java
</span><span>Optional&lt;String&gt; s = Optional.of(&quot;test&quot;);
</span><span>s1.map(s -&gt; &quot;another string&quot;) 
</span><span>s1.ifPresent(System.out::println);
</span><span>
</span><span>// Kotlin
</span><span>s1 : String? = &quot;test&quot;
</span><span>s1.let{ &quot;another string&quot; }
</span><span>s1.also{ println(it) } 
</span></code></pre><ul><li>Kotlin has better support for functional programming, including lambdas and higher order functions which are far more convenient
to deal with than the equivalent SAMs in Java.</li> <li>Getters and setters are automatically implemented based on the attribute names in Kotlin.</li></ul> <h2 id="android-development-in-android-studio"><span id="android-development-in-android-studio" class="anchor"></span>Android development in Android Studio<a href="#android-development-in-android-studio" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Android Studio is an IDE extremely similar to IntelliJ with most of the same features but also supports additional features that help with Android app development.</p> <ul><li>Virtual Machine simulation: Able to simulate various android devices at varying levels of Android SDK levels in order to build and run an app as if I was using it on my own device.
<ul><li>There are limitations to this as it seems there are certain bugs that only occur on the real devices in which the VM simulation is another to test.</li> <li>Each individual SDK level has to be installed and they are quite large (usually a few GB)</li></ul></li> <li>Debug mode in VM simulation: Similar to IntelliJ's debug mode, there is one that works together with the Virtual Android phone that can be used for testing.</li></ul> <h2 id="mockito"><span id="mockito" class="anchor"></span>Mockito<a href="#mockito" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Mockito is an open source Java-based mocking framework used for testing Java applications. THey help to create fake objects of a class or interface
to help with testing classes in isolation. A standard use case would look something like this:</p> <pre><code class="hljs"><span>class TestClass {
</span><span>  void methodToTest(ClassWithInt classWithInt) {
</span><span>    if (classWithInt.getInt() &gt; 0) {
</span><span>      positiveResult();
</span><span>    } else {
</span><span>      negativeResult();
</span><span>    }
</span><span>  }
</span><span>}
</span><span>
</span><span>class TestClassTest {
</span><span>  @mock // creates a 'fake object'
</span><span>  ClassWithInt mockedInput
</span><span>  
</span><span>  void test() {
</span><span>    TestClass testObject = new TestClass();
</span><span>    `when`(mockedInput.getInt()).thenReturn(1); // causes the mocked object to return 1 on this method call
</span><span>    testObject.methodToTest(mockedInput); // runs the method once
</span><span>    verify(testObject).positiveResult(); // checks if the method positiveResult is run as expected
</span><span>    
</span><span>    `when`(mockedInput.getInt()).thenReturn(-1); // note now the mock returns a negative integer
</span><span>    testObject.methodToTest(mockedInput);
</span><span>    verify(testObject).negativeResult();    
</span><span>  }
</span><span>}
</span></code></pre><p>Above, I described a simple use case for Mockito in mocking. The <code class="hljs inline no-lang">@mock</code>, <code class="hljs inline no-lang">when</code> and <code class="hljs inline no-lang">verify</code> are Mockito imports. There are many other features to help with mocking and testing these mocks.
For example, we can assert that a method is invoked with specific arguments, or a method is invoked n number of times, where n could be 0.</p> <p>These are helpful for white-box testing to be sure that certain methods are invoked given certain conditions to prevent code from regressing. However,
we have to be careful with the use of mocking as it does not involve the actual dependencies that might have slightly different behavior.</p> <h2 id="mvp-vs-mvc"><span id="mvp-vs-mvc" class="anchor"></span>MVP vs MVC<a href="#mvp-vs-mvc" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Model View Presenter (MVP) is a different architectural pattern from Model View Controller (MVC) for the use of separation of concerns between business and UI layers.
They generally help to make testing easier and hide data access. <a href="https://www.baeldung.com/mvc-vs-mvp-pattern">Source for information and additional reading</a>.</p> <p>MVC:</p> <ul><li>Model: The model handles the state of the system and contains the logic of how the different parts affect each other.</li> <li>View: Renders the UI for the user to view. Usually updated by Model.</li> <li>Controller: Based on user responses, the Controller uses Model to make the appropriate updates.</li></ul> <p>A common pitfall of MVC then becomes that the View module becomes a single class that is tightly coupled with Model and makes it extremely hard to test in isolation.</p> <p>MVP:</p> <ul><li>Model: Similar, handles the state of the system and contains logic of how different aspects of the internal model affect each other.</li> <li>View: Responible for rendering UI for the user to view. When interacted with, it communicates these in the form of 'user events' to the Presenter.</li> <li>Presenter: Receives user events from View and updates Model with the user events. After Model updates its internal state, it sends these 'state change events' to the Presenter which then updates View.</li></ul> <p>In this design, it is much easier to separately test View and Model with mocks for Presenter. Similarly, Presenter can also be tested, albeit slightly more difficult.
However, Presenter has more responsibilities than its 'equivalent' in Controller as it has to control both Model updates and how to then present these state changes to View.</p> <h1 id="previous-knowledge-gained"><span id="previous-knowledge-gained" class="anchor"></span>Previous knowledge gained<a href="#previous-knowledge-gained" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h1> <h2 id="filesystems-bash-and-cmd"><span id="filesystems-bash-and-cmd" class="anchor"></span>FileSystems, Bash and CMD<a href="#filesystems-bash-and-cmd" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="specifying-file-paths-in-command-line-arguments"><span id="specifying-file-paths-in-command-line-arguments" class="anchor"></span>Specifying File Paths in Command Line Arguments<a href="#specifying-file-paths-in-command-line-arguments" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>General:</p> <ul><li>File path arguments should nearly always be wrapped in quotation marks to accommodate file paths containing spaces.</li></ul> <p>For UNIX file systems:</p> <ul><li><code class="hljs inline no-lang">/</code> is the separator used by UNIX systems</li> <li>UNIX file systems allows for virtually any character to be used in the filename except <code class="hljs inline no-lang">/</code> and <code class="hljs inline no-lang">null</code> (and some specific restricted names). As such, filenames and paths containing non-standard characters
can lead to unexpected errors in program execution. It is important to be aware of such a possibility.
<ul><li>For example, in RepoSense, a local repository's path is first read as input and then used as a String in a CLI argument. A valid \ character in a filename
will end up behaving as an escape character in the new CLI command.</li></ul></li></ul> <p>For Windows file systems:</p> <ul><li>\ is the separator for Windows file systems. However, it is also compatible with <code class="hljs inline no-lang">/</code>. All <code class="hljs inline no-lang">/</code> read in a file path are
replaced with \ as per Microsoft's <a href="https://docs.microsoft.com/en-us/dotnet/standard/io/file-path-formats#canonicalize-separators">documentation</a>.</li> <li>Java's implementation of the <code class="hljs inline no-lang">Paths::get</code> method performs Windows file path validation if run on a Windows system. However, if used in a test method run from UNIX, the behaviour will differ.</li></ul> <h3 id="relative-and-absolute-file-pathing-specifics"><span id="relative-and-absolute-file-pathing-specifics" class="anchor"></span>Relative and Absolute File Pathing Specifics<a href="#relative-and-absolute-file-pathing-specifics" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Both <code class="hljs inline no-lang">./</code> and <code class="hljs inline no-lang">../</code> function similarly in both UNIX and Windows (replacing <code class="hljs inline no-lang">/</code> with \).</li> <li><code class="hljs inline no-lang">~</code> is an absolute pathing feature used in <a href="https://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html#Tilde-Expansion">Bash</a> which expands to the
user's home directory.
<ul><li>If tilde expansion is used as follows: <code class="hljs inline no-lang">~chan-jd/&quot;some file path&quot;/</code> then <code class="hljs inline no-lang">~chan-jd</code> is expanded to the <code class="hljs inline no-lang">$HOME</code> directory of the user <code class="hljs inline no-lang">chan-jd</code>.</li> <li>If wrapped within quotation marks, it becomes a literal <code class="hljs inline no-lang">~</code> char in the file path. Thus, to use both together,
the tilde has to be left out of the quotation marks: <code class="hljs inline no-lang">~/&quot;some test file&quot;</code>.</li> <li><code class="hljs inline no-lang">~</code> does not work in Windows command prompt but does work in Windows PowerShell</li></ul></li> <li>Windows has various methods to apply the current directory to a path
<ul><li>If a file path starts with a single component separator like <code class="hljs inline no-lang">\utilities</code> and the current directory is <code class="hljs inline no-lang">C:\temp</code> then normalization produces <code class="hljs inline no-lang">C:\utilities</code></li> <li>If it starts with a drive without component separator like <code class="hljs inline no-lang">D:sources</code>, it looks for the most recent directory accessed on <code class="hljs inline no-lang">D:\</code>. If it is <code class="hljs inline no-lang">D:\temp</code> then the normalization produces <code class="hljs inline no-lang">D:\temp\sources</code>.</li> <li>Otherwise, a path like <code class="hljs inline no-lang">example\path</code> will be prepended with the current directory on normalization.</li></ul></li></ul> <h3 id="special-characters-in-bash-string-arguments"><span id="special-characters-in-bash-string-arguments" class="anchor"></span>Special Characters in Bash String Arguments<a href="#special-characters-in-bash-string-arguments" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Double quoting an argument will still allow for special characters like <code class="hljs inline no-lang">$</code> (variable substitution) to work.
<ul><li><a href="https://www.gnu.org/software/bash/manual/html_node/Double-Quotes.html#Double-Quotes">Reference manual link</a></li></ul></li> <li>Single quoting preserves the literal value of every single character within the quotes. Another single quote will end the quotation and there is no way to escape it.
<ul><li><a href="https://www.gnu.org/software/bash/manual/html_node/Single-Quotes.html#Single-Quotes">Reference manual link</a></li> <li>This <a href="https://stackoverflow.com/questions/1250079/how-to-escape-single-quotes-within-single-quoted-strings">stackoverflow post</a> suggests a good way to handle quoting arguments containing both single quotes and special characters.
<ul><li>Wrap all characters besides single quotes in <code class="hljs inline no-lang">'</code>.</li> <li>For <code class="hljs inline no-lang">'</code>, replace it with <code class="hljs inline no-lang">'&quot;'&quot;'</code>. Consecutive quoted strings not separated by spaces are treated as a single argument in Bash. This quotes the single quote in double quotes where it does not have special meaning.</li></ul></li></ul></li> <li>A (possibly incomplete) list of special characters in Bash that need to be escaped can be found in this <a href="https://unix.stackexchange.com/questions/347332/what-characters-need-to-be-escaped-in-files-without-quotes">stackexchange post</a>.</li> <li><em>Relevant note</em>: On Windows CMD, the <code class="hljs inline no-lang">'</code> single quote has no special meaning and cannot be used to quote arguments in CMD. Only double quotes works for arguments containing spaces to be treated as a single argument.</li></ul> <h3 id="variable-and-tilde-expansion-in-cmd-and-bash"><span id="variable-and-tilde-expansion-in-cmd-and-bash" class="anchor"></span>Variable and tilde expansion in CMD and Bash<a href="#variable-and-tilde-expansion-in-cmd-and-bash" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>When we run something like <code class="hljs inline no-lang">java -jar RepoSense.jar some cli args</code>, variable expansion and tilde expansion (for Bash) is performed for us before the Java program receives it.</p> <ul><li>E.g. If I specify my repository as <code class="hljs inline no-lang">~/reposense/Reposense</code>, the <code class="hljs inline no-lang">main</code> method in the Java program will receive the String <code class="hljs inline no-lang">/chan-jd/home/reposense/Reposense</code> in its <code class="hljs inline no-lang">args</code> array.</li> <li>This behaviour is mostly beneficial for us but can cause some non-uniform program behaviour when user has more than one way to specify their arguments. An example relevant to RepoSense is that users can specify their local repository file paths in both the command line or the <code class="hljs inline no-lang">repo-config.csv</code> file.
But when RepoSense reads the data straight from the CSV file, it does not perform the necessary expansions. Using the example above, <code class="hljs inline no-lang">RepoSense</code> will receive the raw version of the String, <code class="hljs inline no-lang">~/reposense/Reposense</code> instead which might cause some issues.</li> <li>One possible way to work around this is to <code class="hljs inline no-lang">echo</code> the command in CMD or Bash. The command output will include the substituted expansions.</li></ul> <h2 id="github"><span id="github" class="anchor"></span>GitHub<a href="#github" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="deployments-and-environments"><span id="deployments-and-environments" class="anchor"></span>Deployments and Environments<a href="#deployments-and-environments" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li><a href="https://docs.github.com/en/rest/reference/deployments#environments">Environments</a> can be viewed as the platform for which deployments are staged. There are generally fewer of them. For example in RepoSense, there is roughly two environments per active pull request for deployments.
<ul><li>Environments can be viewed on the main page of a repository.</li> <li>They will linger so long as the deployment on the environment continues to exist and would normally require manual deletion.</li></ul></li> <li><a href="https://docs.github.com/en/rest/reference/deployments">Deployments</a> are requests to deploy a specific version of the repo such as a pending pull request. In the context of RepoSense, a single PR can have several tens of deployments if it is consistently updated.
<ul><li>It is generally difficult to track and control deployments on the GitHub page itself.</li> <li>However, through the GitHub API, we can query all deployments relating to an environment and delete them. This will automatically remove the environment from the listing as well. This solution was taken from this <a href="https://stackoverflow.com/a/61272173">stackoverflow post</a>.</li></ul></li></ul> <h3 id="github-api"><span id="github-api" class="anchor"></span>GitHub API<a href="#github-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The GitHub API provides us with a way to interact with repositories via a RESTful API. Using <code class="hljs inline no-lang">curl</code> commands:</p> <ul><li>We are able to query (via <code class="hljs inline no-lang">GET</code>) for information such as branches, deployments and environments</li> <li>We are also able to <code class="hljs inline no-lang">POST</code> commands to a repository to perform various actions such as deleting deployments. These generally require a security token which might not be available from a personal computer's CLI. When running GitHub Actions, it is possible to acquire one for the repository to perform actions such as closing deployments.</li></ul> <h3 id="github-actions"><span id="github-actions" class="anchor"></span>GitHub Actions<a href="#github-actions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>We must add GitHub action workflow files to the directory <code class="hljs inline no-lang">.github/workflows</code> in order to automatically perform certain scripts on certain GitHub actions.</p> <ul><li>The general workflow of a <code class="hljs inline no-lang">.yml</code> workflow file contains a declaration <code class="hljs inline no-lang">on</code> which states under what scenarios will these actions be triggered
<ul><li>It is followed by a list of jobs. For each job, we can declare a name, platform to run on, environment variables, followed by sequential steps to perform.</li> <li>Under steps, we can use <code class="hljs inline no-lang">run</code> to run shell scripts similar to running the same command from a BASH terminal</li></ul></li> <li>When setting up an environment to perform a specific workflow, we can generally choose exactly what OS to run, what versions of Java or other languages/packages to use.
<ul><li>It is additionally helpful to be aware of what are the versions used by default for the various OS-es.
<ul><li><a href="https://github.com/actions/virtual-environments/blob/c253e7f4d192e492988596167a1d461e99698c13/images/linux/Ubuntu2004-README.md">Ubuntu 20.04</a> - here we can see the default Git used is 2.30.2. It might be helpful to be aware of such specifications as we might experience differing behavior in the future due to version differences.</li></ul></li> <li>Related to RepoSense, and caused me quite a bit of trouble is that GitHub Actions uses the default timezone of UTC+00.00 which leads to some commits being assigned to the previous day as compared to if it were run locally on my own machine which is at UTC+8.</li></ul></li></ul> <h2 id="git-specifications"><span id="git-specifications" class="anchor"></span>Git Specifications:<a href="#git-specifications" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="git-diff-output"><span id="git-diff-output" class="anchor"></span>Git Diff Output<a href="#git-diff-output" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The <code class="hljs inline no-lang">git diff</code> command is used heavily by RepoSense for analyzing. The following are behaviour in the output that I discovered from self-testing as documentation about the behaviour was difficult to find:</p> <ul><li><p>The filename <code class="hljs inline no-lang">/dev/null</code> represents a non-existent file. A mapping from <code class="hljs inline no-lang">/dev/null</code> to a file indicates a new file.
Similarly, a mapping from a file to <code class="hljs inline no-lang">/dev/null</code> indicates a deleted file.</p></li> <li><p>For filenames containing certain special characters (i.e. the lines <code class="hljs inline no-lang">--- a/some/file/name</code> or <code class="hljs inline no-lang">+++ b/some/file/name</code>), the listing of filenames in the before-after comparison is adjusted slightly.</p> <ul><li>For files containing spaces, the filename will have a tab character at the end. E.g. <code class="hljs inline no-lang">+++ b/space test\t</code>.</li> <li>For files containing special characters (not including space) such as \, <code class="hljs inline no-lang">&quot;</code>, <code class="hljs inline no-lang">\t</code>, the filename will be placed in quotation marks. E.g. <code class="hljs inline no-lang">+++ &quot;b/tab\\ttest/&quot;</code></li> <li>For files containing both of the above cases, the filename is first wrapped in double quotation marks followed by a tab character.</li></ul></li> <li><p>These nuances in <code class="hljs inline no-lang">git diff</code> filename output may be important for filename designation as is done in RepoSense.</p></li></ul> <h3 id="git-log-output"><span id="git-log-output" class="anchor"></span>Git Log Output<a href="#git-log-output" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Every commit in the log output displays the hash, author with email, date and message.</p> <ul><li>If a user has set an email in their <code class="hljs inline no-lang">git config</code> but set their Github 'keep my email address private' setting to true, web-based Git operations will list their email as <code class="hljs inline no-lang">username@users.noreply.github.com</code>.</li> <li>It is possible to explicitly set the email to be empty through <code class="hljs inline no-lang">git config --global user.email \&lt;\&gt;</code> which will set it to <code class="hljs inline no-lang">&lt;&gt;</code>. No email will show up in a commit done by such a user config.</li></ul> <h3 id="git-commit-and-amp-config-interaction"><span id="git-commit-and-amp-config-interaction" class="anchor"></span>Git Commit &amp; Config Interaction<a href="#git-commit-and-amp-config-interaction" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p><code class="hljs inline no-lang">git commit</code> commit information details can be found <a href="https://git-scm.com/docs/git-commit#_commit_information">here</a>.</p> <ul><li>When committing with a <code class="hljs inline no-lang">user.name</code> and <code class="hljs inline no-lang">user.email</code> that matches a GitHub account, commits on GitHub will be able to link the GitHub account to the commit.
<ul><li>However, committing with an empty email <code class="hljs inline no-lang">&lt;&gt;</code> will cause the commit to look like <a href="https://github.com/reposense/testrepo-Alpha/commit/2536b8e0de3366989f4b124b9a5a613db010379e">this on GitHub</a> where there is no account linked to it.</li></ul></li> <li>It is possible temporarily set <code class="hljs inline no-lang">user.name</code> as <code class="hljs inline no-lang">&lt;&gt;</code>. However, it will not allow the user to commit, citing an invalid username.
<ul><li>It is also possible to set <code class="hljs inline no-lang">user.name</code> as an empty string which is equivalent to resetting it. Git will not allow commits until a <code class="hljs inline no-lang">user.name</code> has been set.</li></ul></li></ul> <h3 id="git-changelogs"><span id="git-changelogs" class="anchor"></span>Git Changelogs<a href="#git-changelogs" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>This section refers specifically to the changes to the <code class="hljs inline no-lang">Git</code> tool itself. I have found out from my own experience that finding information relating to <code class="hljs inline no-lang">Git</code> versions can be difficult as most search results relate to how <code class="hljs inline no-lang">Git</code> can be used to manage those versions.</p> <ul><li>The release notes can be found at <a href="https://github.com/git/git/tree/master/Documentation/RelNotes">https://github.com/git/git/tree/master/Documentation/RelNotes</a></li> <li>One (rather inefficient) way I have found to attempt to search for relevant information regarding when a specific change was made was to do the following:
<ol><li>Clone the <code class="hljs inline no-lang">git</code> repository locally (Note the repository is quite large)</li> <li>Create a bash script that takes in a string from the command line and <code class="hljs inline no-lang">grep</code>-es it against all the text files in the folder <code class="hljs inline no-lang">Documentation/RelNotes</code></li></ol> <ul><li>Queries are generally quite fast. For example, if I wanted to find out when the <code class="hljs inline no-lang">git blame --ignore-revs-file</code> flag was added, I could search for <code class="hljs inline no-lang">git blame</code> and see all relevant release notes and look them up manually.</li> <li><code class="hljs inline no-lang">grep</code> can be set to quiet mode if I'm just looking for the file containing the reference. Otherwise, in non-quiet mode, the line in which the string match is found is printed. I can read the line and see if it is directly related to what I am looking for without having to look-up the file myself.</li></ul></li> <li>Descriptions of the changes can be somewhat vague. It is usually easier to look for the specific command and see if it showed up in the specific release notes rather than trying to find keywords relating to the change in mind.
<ul><li>For example the <code class="hljs inline no-lang">ignore-revs-list</code> flag addition was done in 2.23.0. The release notes reads <code class="hljs inline no-lang">&quot;git blame&quot; learned to &quot;ignore&quot; commits in the history, ...</code>.</li> <li>For full details on the change, we need to go to the commit message itself. The commit messages are extremely detailed, e.g. <code class="hljs inline no-lang">git blame --ignore-revs-file</code> commit can be found <a href="https://github.com/git/git/commit/ae3f36dea16e51041c56ba9ed6b38380c8421816">here</a>.</li></ul></li></ul> <h2 id="javascript-vue-js"><span id="javascript-vue-js" class="anchor"></span>Javascript/Vue.js<a href="#javascript-vue-js" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>New language for me, no prior experience. Learnt how to read and interpret most of the lines of Javascript in RepoSense.</p> <ul><li>Javascript has <code class="hljs inline no-lang">Object</code>s which are a container of key-value pairs listing its properties, and some pre-defined methods.
<ul><li>Can perform operations on <code class="hljs inline no-lang">Object</code>s similar to what can be done to a map. Use <code class="hljs inline no-lang">Object.entries(object)</code> to enumerate the key-value pairs.</li> <li>The properties of an object can be created, edited and accessed from anywhere more similar to languages like Python's OOP</li></ul></li> <li>Javascript uses <code class="hljs inline no-lang">(args...) =&gt; output</code> to write lambda functions as opposed to <code class="hljs inline no-lang">(args...) -&gt; output</code> for Java.</li> <li>Javascript has something known as object destructuring where we can extract the properties of an object.
<ul><li>Given something like <code class="hljs inline no-lang">author = {name: JD, repo: RepoSense}</code>, then doing <code class="hljs inline no-lang">const {name, repo} = author</code> would allow us to access the <code class="hljs inline no-lang">name</code> and <code class="hljs inline no-lang">repo</code> as local variables.</li></ul></li></ul> <p>Interacting with objects on a webpage:</p> <ul><li>Each click on an interactive component on the webpage fires off a <code class="hljs inline no-lang">clickEvent</code>.
<ul><li>In Vue, we can tag listener methods to a specific event a component might encounter.</li> <li>The event itself also contains details about the circumstances in which it was triggered such as other buttons that were pressed while the <code class="hljs inline no-lang">clickEvent</code> was created.</li> <li>The default behaviour for clicking on an anchor link object is to open the hyperlink reference. This can be prevented with a listener that does <code class="hljs inline no-lang">event.preventDefault()</code>.</li></ul></li></ul> <h2 id="html"><span id="html" class="anchor"></span>HTML<a href="#html" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <ul><li><code class="hljs inline no-lang">href</code> attribute of an anchor object provides the hyperlink reference to whichever URL page the anchor object is supposed to open.
<ul><li>Notably, if <code class="hljs inline no-lang">href</code> is not set and left as <code class="hljs inline no-lang">undefined</code>, then a link will not be opened even if <code class="hljs inline no-lang">target</code> is set.</li></ul></li> <li>In conjunction with the <code class="hljs inline no-lang">href</code> property, there is the <code class="hljs inline no-lang">target</code> property which designates where the hyperlink will be opened.
<ul><li>Most commonly used in RepoSense is <code class="hljs inline no-lang">target=&quot;_blank&quot;</code> which means to open a new window or tab.</li> <li>There are other alternatives such as <code class="hljs inline no-lang">_self</code> for opening in the same frame, <code class="hljs inline no-lang">_parent</code> and <code class="hljs inline no-lang">_top</code>.</li></ul></li></ul> <h2 id="regular-expressions"><span id="regular-expressions" class="anchor"></span>Regular Expressions<a href="#regular-expressions" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Java provides extensive support for Regex matching via the <code class="hljs inline no-lang">Pattern</code> and <code class="hljs inline no-lang">Matcher</code> classes which facilitate string parsing.</p> <ul><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html"><code class="hljs inline no-lang">Pattern</code></a> is Java's class for handling various regex pattern.
<ul><li>The API provides a list of all the recognised syntax. In particular, I would like to go over the different quantifier types as I believe they are quite important for anyone who wants to build complex regex patterns.</li> <li><code class="hljs inline no-lang">Greedy quantifiers</code> - what we see the most often: <code class="hljs inline no-lang">x?</code>, <code class="hljs inline no-lang">x*</code>, <code class="hljs inline no-lang">x+</code>.
<ul><li>These will always try to be met if possible. They take precedence over <code class="hljs inline no-lang">Reluctant quantifiers</code>.</li></ul></li> <li><code class="hljs inline no-lang">Reluctant quantifiers</code> - e.g. <code class="hljs inline no-lang">x??</code>, <code class="hljs inline no-lang">x*?</code>, <code class="hljs inline no-lang">x+?</code>.
<ul><li>These matched only if it is required for the regex to fully match.</li> <li>For example, matching <code class="hljs inline no-lang">(?&lt;greedy&gt;.*)(?&lt;reluctant&gt;.*)</code> on the string <code class="hljs inline no-lang">Example word</code> will result in <code class="hljs inline no-lang">greedy = Example word</code> and <code class="hljs inline no-lang">reluctant = &quot;&quot;</code>;</li></ul></li> <li><code class="hljs inline no-lang">Possessive quantifiers</code> - e.g. <code class="hljs inline no-lang">x?+</code>, <code class="hljs inline no-lang">x*+</code>, <code class="hljs inline no-lang">x++</code>.
<ul><li>When Java does the matching from left to right, these quantifiers will be matched first. Once Java reaches the end of the line, it actually does backtracking to see if some greedy/reluctant quantifiers can give up some characters for the regex to match.</li> <li>However, possessive quantifiers will never give up their characters on backtrack even if it means that the matcher would otherwise have matched.</li> <li>Possessive quantifiers should be used carefully. However, their behaviour is more straightforward and easy to understand.</li></ul></li></ul></li> <li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/regex/Matcher.html"><code class="hljs inline no-lang">Matcher</code></a> <ul><li>We can perform <code class="hljs inline no-lang">Pattern p = ...; p.matcher(&quot;some String&quot;)</code> to obtain a <code class="hljs inline no-lang">Matcher</code> object. Most of the information that we want can be obtained from this object.</li> <li>However, there are some points to be noted about the implementation of the <code class="hljs inline no-lang">Matcher</code> object in Java.
<ul><li><code class="hljs inline no-lang">Matcher</code> objects (for Java 8 and 11) are initially just a mutable container containing the regex and the String. Matching logic has not yet been performed.</li> <li>Suppose we have named groups within our regex pattern. We have to run a <code class="hljs inline no-lang">matches</code> or <code class="hljs inline no-lang">find</code> method at least once for the object to mutate and support group queries.
<ul><li>Calling a <code class="hljs inline no-lang">Matcher::group</code> directly without first calling <code class="hljs inline no-lang">matches</code> or <code class="hljs inline no-lang">find</code> leads to an <code class="hljs inline no-lang">IllegalStateException</code> as the object never attempted to match anything yet.</li></ul></li></ul></li></ul></li></ul> <p>Regex testing can be particularly cumbersome, slow and difficult to grasp why the regex is behaving the way it is. I personally found this website <a href="https://regex101.com/">regex101</a> which allows convenient testing of various regex patterns on different inputs. It also supports regex testing for different languages.</p> <h2 id="gson-package"><span id="gson-package" class="anchor"></span>GSON package<a href="#gson-package" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <p>Gson (also known as Google Gson) is an open-source Java library to serialize and deserialize Java objects to (and from) JSON. (Taken from Wikipedia's description)</p> <ul><li>I used this <a href="https://www.baeldung.com/gson-json-to-map">baeldung.com guide</a> to learn about converting JSON objects into HashMaps. They also have various other articles describing other features like deserialization to greater depth. Their API can also be easily found online. This is their <a href="https://javadoc.io/doc/com.google.code.gson/gson/latest/index.html">2.9.0 API</a>.</li> <li>From my experience, the general way in which GSON reads a JSON file is to read it into a <code class="hljs inline no-lang">JsonElement</code> abstract class with four different types, a <code class="hljs inline no-lang">JsonArray</code>, <code class="hljs inline no-lang">JsonNull</code>, <code class="hljs inline no-lang">JsonObject</code> and <code class="hljs inline no-lang">JsonPrimitive</code>.
<ul><li>Most of the types listed above are very similar to their Java counterparts. The one that stands out is the <code class="hljs inline no-lang">JsonObject</code> which is more similar to the Javascript object as it is a collection of name-value pairs where each name is a string and each value is another <code class="hljs inline no-lang">JsonElement</code>.</li></ul></li> <li>In order to read JSON files into more exotic objects that we might have previously defined, we can either use a <code class="hljs inline no-lang">TypeToken</code> for the GSON <code class="hljs inline no-lang">JsonParser</code> or implement our own <code class="hljs inline no-lang">JsonDeserializer</code> for each class we want to be read from a JSON file.
<ul><li>One naive way of parsing a JSON file into a Map is to do <code class="hljs inline no-lang">Map map = new Gson().fromJson(JSON_FILE, Map.class);</code>. However, this immediately runs into the problem where the map class itself is using raw types.
<ul><li><p>To avoid this, we can use a <code class="hljs inline no-lang">TypeToken</code>. By creating a new type as such</p> <pre><code>Type mapType = new TypeToken&lt;Map&lt;String, Commit&gt;&gt;() {}.getType();
Map&lt;String, Commit&gt; map = new Gson().fromJson(JSON_FILE, mapType);
</code></pre> <p>We are able to preserve the generics class types used.</p></li></ul></li></ul></li></ul> <h2 id="others"><span id="others" class="anchor"></span>Others<a href="#others" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h2> <h3 id="and-quot-file-and-quot-uri-scheme"><span id="and-quot-file-and-quot-uri-scheme" class="anchor"></span>&quot;file&quot; URI Scheme<a href="#and-quot-file-and-quot-uri-scheme" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Specification can be found here <a href="https://datatracker.ietf.org/doc/html/rfc8089">RFC8089</a>.
<ul><li>A file URL looks like <code class="hljs inline no-lang">file://host.example.com/path/to/file</code>.
<ul><li>Double slashes following the colon <code class="hljs inline no-lang">://</code> indicates that the file is not local and <code class="hljs inline no-lang">host.example.com</code> is the 'authority' which hosts the file</li> <li>Single slash or triple slashes after the colon <code class="hljs inline no-lang">:/</code> or <code class="hljs inline no-lang">:///</code> will both be treated as a local file. Everything after the last slash forms the path to the file.</li></ul></li></ul></li></ul> <h3 id="curl-command"><span id="curl-command" class="anchor"></span>cURL command<a href="#curl-command" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>cURL is a command-line tool to transfer data to or from a server using support protocols. In particular, GitHub Actions shows many examples of RESTful API calls using the <code class="hljs inline no-lang">curl</code> command.</p> <h3 id="restful-api"><span id="restful-api" class="anchor"></span>RESTful API<a href="#restful-api" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>REST stands for <em>Representational state transfer</em>. It is an architectural style for an API that uses HTTP requests to access and use data. (description taken from <a href="https://www.techtarget.com/searchapparchitecture/definition/RESTful-API">here</a>).</li> <li>GitHub has its own RESTful API where we can make queries to repositories and possibly post commands to a repo provided we have proper access rights. The return type for queries is normally in the JSON format.</li></ul> <h3 id="bash-shell-scripting"><span id="bash-shell-scripting" class="anchor"></span>Bash Shell Scripting<a href="#bash-shell-scripting" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Can use <code class="hljs inline no-lang">.sh</code> files to write shell scripts that can be run in Linux environments</li> <li>Can specify functions as <code class="hljs inline no-lang">function_name() { ... }</code> <ul><li>Functional arguments can be referenced from within the function declaration block with <code class="hljs inline no-lang">${1}</code> referring to the first argument, <code class="hljs inline no-lang">${2}</code> referring to the second argument, etc.</li> <li>These functional arguments can be specified by a user via <code class="hljs inline no-lang">function_name &quot;$argument1&quot; &quot;$argument2&quot;</code></li> <li><code class="hljs inline no-lang">$@</code> can also be used to refer to all of the shell script's CLI arguments. It can be iterated through like an array.</li></ul></li></ul> <h3 id="other-popular-remote-repository-hosts"><span id="other-popular-remote-repository-hosts" class="anchor"></span>Other popular remote repository hosts<a href="#other-popular-remote-repository-hosts" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <ul><li>Any remote site that allows access to a <code class="hljs inline no-lang">.git</code> directory is capable of hosting a remote repository</li> <li>Popular remote repository domains besides GitHub include sites like GitLab and BitBucket
<ul><li>Interacting with these are nearly identical to interacting with GitHub, with <code class="hljs inline no-lang">https</code> and <code class="hljs inline no-lang">ssh</code> options to clone a repository.</li> <li>Relevant to RepoSense: the paths to commits and other features are usually different between the sites. For RepoSense to support all these websites, it'll have to take into account the differences in the path to these resources on the website.</li></ul></li></ul> <h3 id="intellij-inspect-code"><span id="intellij-inspect-code" class="anchor"></span>IntelliJ Inspect Code<a href="#intellij-inspect-code" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>The Inspect Code tool allows IntelliJ to look for common code quality issues such as</p> <ul><li>Declaration redundancy</li> <li>Probable bugs</li> <li>Proofreading</li></ul> <p>Limitations:</p> <ul><li>A full run of the code cleanup takes a long time to complete. A run on RepoSense itself takes ~10 minutes.
This can be cut significantly shorter if we ignore the proofreading checks which cuts it down to 30 seconds.</li> <li>'Unused' (as declared by IntelliJ) fields might not be redundant such as in <a href="https://github.com/reposense/RepoSense/blob/master/src/main/java/reposense/report/SummaryJson.java"><code class="hljs inline no-lang">SummaryJson.java</code></a> where the fields are necessary for conversion to a JSON file.</li> <li>'Unused' methods are sometimes necessary for other tools such as JavaBeans (requires setters and getters) and JavaFX (@FXML methods are not detected as 'used')</li></ul> <p>Thus, we should still exercise discretion in using this tool even if it is something as simple as removing unused variables or methods.</p> <h3 id="file-locks"><span id="file-locks" class="anchor"></span>File locks<a href="#file-locks" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>When Java opens a file for writing, it obtains a file lock in the form of <code class="hljs inline no-lang">filename.extension.lck</code> with <code class="hljs inline no-lang">lck</code> standing for lock.
This serves to support mutual exclusion for access to writing to the file. This appears in RepoSense when loggers attempt to write to the log file in which case, some kind of mutual exclusion gurantee is required.</p> <ul><li>Notably, file locks (and other process resources) are released automatically when the main Java process <code class="hljs inline no-lang">exits()</code>.
<ul><li>However, in some scenarios, releasing the lock only at the end of the entire process might be too late. One example I encountered is that when running <code class="hljs inline no-lang">gradlew</code> system tests, the <code class="hljs inline no-lang">log</code> file lock is held on to for the entire duration of the run over multiple system tests. This causes issues with running consecutive system tests as I am unable to delete the previous system test's report due to the lingering file lock.</li></ul></li> <li>In some scenarios when the program does not exit properly, the <code class="hljs inline no-lang">.lck</code> file might be left behind.
<ul><li>An example execution that results in this is running RepoSense via <code class="hljs inline no-lang">gradlew</code> command line with the <code class="hljs inline no-lang">-v</code> command. After <code class="hljs inline no-lang">ctrl+C</code> to close the server, the <code class="hljs inline no-lang">.lck</code> file persists even though it should have been cleaned up. For some reason, running <code class="hljs inline no-lang">gradlew</code> on Ubuntu 18.04 does not have the same issue.
<ul><li>However, this seems to be mostly harmless as it does not affect anything else.</li></ul></li></ul></li> <li>Suggested by this <a href="https://stackoverflow.com/questions/12849138/close-log-files/22957009#22957009">stackoverflow post</a>, one way to easily release all log resources at the end of Java execution is to use <code class="hljs inline no-lang">LogManager.getLogManager().reset()</code> which immediately releases all resources.</li></ul> <h3 id="checkstyle"><span id="checkstyle" class="anchor"></span>Checkstyle<a href="#checkstyle" onclick="event.stopPropagation()" class="fa fa-anchor"></a></h3> <p>Their GitHub repository can be found <a href="https://github.com/checkstyle/checkstyle">here</a> where we can view the features they are working on and bugs that other people are experiencing.</p> <ul><li>In particular, there is a rather strange bug relating to <code class="hljs inline no-lang">forceStrictCondition</code> which is not able to properly detect parent lines of nested line wrapppings.
<ul><li>The relevant issues can be found in <a href="https://github.com/checkstyle/checkstyle/issues/6024">Issue #6024</a> and <a href="https://github.com/checkstyle/checkstyle/issues/6020">Issue #6020</a></li></ul></li> <li>The above issues result in some somewhat strange enforcements, for example (taken from #6024), the code below has violations though it is what we expect the indentations to be</li></ul> <pre><code class="hljs"><span>Arrays.asList(true,
</span><span>        Arrays.asList(true,
</span><span>                true, //violation
</span><span>                true));  //violation
</span></code></pre><ul><li>While the same line of code below is what passes the checkstyle but has unusual indentation.</li></ul> <pre><code class="hljs"><span>Arrays.asList(true,
</span><span>        Arrays.asList(true,
</span><span>        true, // no violation, but should be
</span><span>        true));  // no violation, but should be
</span></code></pre><ul><li>There appears to be quite a distinct tradeoff here as without <code class="hljs inline no-lang">forceStrictCondition</code>, checkstyle only enforces the minimum required indentation level. A user's indentation can be as large as they desire so long as it does not exceed the line character limit.
<ul><li>However, if we were to <code class="hljs inline no-lang">forceStrictCondition</code>, then for nested line wrappings, the indentation being enforced can be somewhat strange.</li></ul></li></ul> <i id="scroll-top-button" onclick="handleScrollTop()" aria-hidden="true" class="fa fa-arrow-circle-up fa-lg d-print-none"></i></div> <nav id="page-nav" class="fixed-header-padding" data-v-e8c82f88><div class="nav-component slim-scroll" data-v-e8c82f88></div> <!----></nav></div> <footer><div class="text-center"><p>[<strong>This site was generated using <img src="https://markbind.org/favicon.ico" width="25"> <a href="https://markbind.org/">MarkBind 4.1.0</a></strong> on Tue, May 2, 2023, 2:23:27 PM UTC]<br> <span class="dimmed"><small><small>favicon.ico of this site was made by <a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></small></small></span></p></div></footer></div>
</body><script src="/2023/markbind/js/bootstrap-utility.min.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
